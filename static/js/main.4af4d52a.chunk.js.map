{"version":3,"sources":["service/token.jsx","service/api.jsx","service/authentication.jsx","components/MenuHome.js","components/FormAuthenticate.js","components/AuthenticatePage.js","components/SearchSchool.js","components/FormAddChild.js","service/snottyBrat.jsx","components/ChildrenList.js","components/PageDeclare.js","App.js","service/parent.jsx","service/school.jsx","reportWebVitals.js","index.js"],"names":["setToken","token","console","log","substr","localStorage","setItem","defaultOptions","baseURL","method","headers","api","axios","create","interceptors","request","use","config","getItem","Authorization","response","res","err","status","removeItem","Error","isAuthenticated","get","MenuHome","hasDeclared","setHasDeclared","setIsAuth","isAuth","className","type","onClick","post","then","data","FormAuthenticate","spec","handleChange","handleSubmit","header","htmlFor","id","userId","aria-describedby","placeholder","value","state","username","onChange","passId","autoComplete","password","btnValue","AuthenticatePage","useState","signinUsername","signinPassword","signinState","setSigninState","loginUsername","loginPassword","loginState","setLoginState","signSpec","Object","keys","logSpec","e","target","prevState","preventDefault","catch","error","alert","SearchSchool","handleChangeSchool","passedId","schools","list","name","map","i","FormAddChild","updateBrats","firstName","lastName","child","setChild","school","setSchool","handleChangeInput","obj","bratObj","find","includes","ChildrenList","myBrats","setState","useEffect","lesBool","contagious","sick","checked","index","getAttribute","handleClickSnottyStatus","length","data-key","readOnly","indeterminate","toString","defaultChecked","PageDeclare","data-bs-toggle","data-bs-target","aria-expanded","aria-controls","aria-labelledby","data-bs-parent","App","contaminated","setContaminated","setSchools","schoolInfo","setSchoolInfo","setMyBrats","isLoaded","parentId","a","allSnots","fetchData","schoolObj","children","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.4af4d52a.chunk.js","sourcesContent":["function setToken(token) {\n  if (token) {\n    console.log(`service/token setToken ${token.substr(0, 10)}...`);\n    localStorage.setItem(\"token\", token);\n  }\n}\n\nfunction getToken() {\n  return localStorage.getItem(\"token\");\n}\n\nfunction removeToken() {\n  localStorage.removeItem(\"token\");\n}\n\nexport { setToken, getToken, removeToken };\n","import axios from \"axios\";\n\nimport { getToken, removeToken } from \"./token\";\n\n// TODO : Check Bearer token with nasri\n\nconst REACT_APP_API_BASE_URL = \"https://declare-ton-morveux.herokuapp.com/\";\n\nconst defaultOptions = {\n  baseURL: REACT_APP_API_BASE_URL,\n  method: \"get\",\n  headers: {\n    \"Content-Type\": \"application/json\",\n  },\n};\nconst api = axios.create(defaultOptions);\n\napi.interceptors.request.use((config) => {\n  const token = getToken();\n  // console.log(`interceptors request with token ${token}`);\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\n\napi.interceptors.response.use(\n  (res) => {\n    // console.log(\"interceptors response : \", res);\n    return res;\n  },\n  (err) => {\n    if (err.response.status === 401) {\n      removeToken();\n      throw new Error(`Invalid token`);\n    }\n    throw err;\n  }\n);\n\nexport default api;\n","import api from \"./api\";\nimport { setToken } from \"./token\";\n\nfunction login(username, password) {\n  return api\n    .post(`authenticate`, {\n      username: username,\n      password: password,\n    })\n    .then((response) => {\n      const token = response.data.token;\n      setToken(token);\n      return token;\n    });\n}\n\nfunction register(username, password) {\n  return api\n    .post(`register`, {\n      username: username,\n      password: password,\n    })\n    .then((response) => {\n      const token = response.data.token;\n      setToken(token);\n      return token;\n    });\n}\n\nfunction isAuthenticated() {\n  return api.get(`isAuthenticated`);\n}\nfunction loggingOut() {\n  return api.post(`logout`);\n}\n\nexport { login, register, isAuthenticated, loggingOut };\n","import { loggingOut } from \"../service/authentication\";\n\nfunction MenuHome({ hasDeclared, setHasDeclared, setIsAuth, isAuth }) {\n  const handleLogout = () => {\n    loggingOut().then((response) => setIsAuth(response.data));\n  };\n\n  return (\n    <>\n      <nav className=\"navbar navbar-expand-lg navbar-light bg-light\">\n        <div className=\"container-fluid\">\n          <span className=\"navbar-brand\">DtM Logo</span>\n          <button\n            className=\"btn btn-outline-success\"\n            type=\"submit\"\n            onClick={() => setHasDeclared(!hasDeclared)}\n          >\n            Déclarez un enfant\n          </button>\n          {isAuth && (\n            <button\n              className=\"btn btn-outline-warning\"\n              type=\"submit\"\n              onClick={handleLogout}\n            >\n              Se déconnecter\n            </button>\n          )}\n        </div>\n      </nav>\n    </>\n  );\n}\n\nexport default MenuHome;\n","function FormAuthenticate({ spec, handleChange, handleSubmit }) {\n  return (\n    <div className=\"col-sm\">\n      <h3>{spec.header}</h3>\n      <form>\n        <div className=\"form-group text-left\">\n          <label htmlFor=\"exampleInputEmail1\">Nom d'utilisateur</label>\n          <input\n            type=\"username\"\n            className=\"form-control\"\n            id={spec.userId}\n            aria-describedby=\"usernameHelp\"\n            placeholder=\"Entrez votre nom d'utilisateur\"\n            value={spec.state.username}\n            onChange={handleChange}\n          />\n          <small id=\"usernameHelp\" className=\"form-text text-muted\">\n            Nom d'utilisateur (pas l'email)\n          </small>\n        </div>\n        <div className=\"form-group text-left\">\n          <label htmlFor=\"exampleInputPassword1\">Mot de passe</label>\n          <input\n            type=\"password\"\n            className=\"form-control\"\n            id={spec.passId}\n            placeholder=\"Entrez votre mot de passe\"\n            autoComplete=\"new-password\"\n            value={spec.state.password}\n            onChange={handleChange}\n          />\n        </div>\n        <div className=\"form-check\"></div>\n        <button\n          type=\"submit\"\n          className=\"btn btn-primary btn-block\"\n          onClick={handleSubmit}\n        >\n          {spec.btnValue}\n        </button>\n      </form>\n    </div>\n  );\n}\n\nexport default FormAuthenticate;\n","import { useState } from \"react\";\nimport { register, login, isAuthenticated } from \"../service/authentication\";\n\nimport FormAuthenticate from \"./FormAuthenticate\";\n\nfunction AuthenticatePage({ setHasDeclared, hasDeclared, setIsAuth }) {\n  const [signinState, setSigninState] = useState({\n    signinUsername: \"\",\n    signinPassword: \"\",\n  });\n\n  const [loginState, setLoginState] = useState({\n    loginUsername: \"\",\n    loginPassword: \"\",\n  });\n\n  const handleChangeSignin = (e) => {\n    const { id, value } = e.target;\n    setSigninState((prevState) => ({\n      ...prevState,\n      [id]: value,\n    }));\n  };\n\n  const handleChangeLogin = (e) => {\n    const { id, value } = e.target;\n    setLoginState((prevState) => ({\n      ...prevState,\n      [id]: value,\n    }));\n  };\n\n  const handleSubmitSignin = (e) => {\n    e.preventDefault();\n    const { signinUsername, signinPassword } = signinState;\n    register(signinUsername, signinPassword)\n      .then(\n        (response) => {\n          // console.log(`You are connected with token : ${response.token}`);\n          console.log(response);\n        },\n        () => console.log(\"already taken\")\n      )\n      .catch((error) => alert(`Sorry, there was an error`));\n    isAuthenticated().then((response) => {\n      setIsAuth(response.data);\n    });\n  };\n\n  const handleSubmitLogin = (e) => {\n    e.preventDefault();\n    const { loginUsername, loginPassword } = loginState;\n    login(loginUsername, loginPassword)\n      .then((token) => {\n        // console.log(`You are connected with token : ${token}`);\n        isAuthenticated().then((response) => {\n          setIsAuth(response.data);\n        });\n      })\n      .catch((error) => {\n        alert(`Sorry, there was an error`);\n        console.log(error);\n      });\n  };\n\n  const signSpec = {\n    header: \"Créer un compte\",\n    userId: Object.keys(signinState)[0],\n    state: signinState,\n    passId: Object.keys(signinState)[1],\n    btnValue: \"Créer un compte\",\n  };\n\n  const logSpec = {\n    header: \"Se connecter\",\n    userId: Object.keys(loginState)[0],\n    state: loginState,\n    passId: Object.keys(loginState)[1],\n    btnValue: \"Se connecter\",\n  };\n\n  return (\n    <div className=\"container-fluid\">\n      <button\n        type=\"button\"\n        className=\"btn btn-primary\"\n        onClick={() => setHasDeclared(!hasDeclared)}\n      >\n        Retour\n      </button>\n      <div className=\"row\">\n        <div className=\"col-sm-6\">\n          <FormAuthenticate\n            spec={signSpec}\n            handleChange={handleChangeSignin}\n            handleSubmit={handleSubmitSignin}\n          />\n        </div>\n        <div className=\"col-sm-6\">\n          <FormAuthenticate\n            spec={logSpec}\n            handleChange={handleChangeLogin}\n            handleSubmit={handleSubmitLogin}\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default AuthenticatePage;\n","function SearchSchool({ handleChangeSchool, passedId, schools }) {\n  return (\n    <>\n      <label className=\"form-check-label\" htmlFor={passedId}>\n        Choisissez une école\n      </label>\n      <input\n        className=\"form-control\"\n        list=\"school-lists\"\n        id={passedId}\n        name=\"school-choice\"\n        onChange={handleChangeSchool}\n        placeholder=\"Cliquez ou entrez une école\"\n      />\n\n      <datalist id=\"school-lists\">\n        {schools.map((e, i) => (\n          <option key={e.id} value={e.name} />\n        ))}\n      </datalist>\n    </>\n  );\n}\n\nexport default SearchSchool;\n","import SearchSchool from \"./SearchSchool\";\nimport { useState } from \"react\";\n\nimport { addSnottyBrat } from \"../service/snottyBrat\";\n\nfunction FormAddChild({ schools, updateBrats }) {\n  const [child, setChild] = useState({ firstName: \"\", lastName: \"\" });\n  const [school, setSchool] = useState();\n\n  const handleChangeSchool = (e) => {\n    setSchool(e.target.value);\n  };\n\n  const handleChangeInput = (e) => {\n    const { id, value } = e.target;\n    setChild((prevState) => ({\n      ...prevState,\n      [id]: value,\n    }));\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    const { firstName, lastName } = child;\n    const schoolObj = schools.find((e) => e.name.includes(school));\n    const bratObj = { firstName, lastName, school: { id: schoolObj.id } };\n    console.log(bratObj);\n    addSnottyBrat(bratObj).then((response) => console.log(response.data));\n    updateBrats();\n  };\n\n  return (\n    <>\n      <form>\n        <div className=\"form-group text-left\">\n          <label className=\"form-check-label\">Prénom du morveux</label>\n          <input className=\"\" id=\"firstName\" onChange={handleChangeInput} />\n        </div>\n        <div className=\"form-group text-left\">\n          <label className=\"form-check-label\">Nom de famille du morveux</label>\n          <input className=\"\" id=\"lastName\" onChange={handleChangeInput} />\n        </div>\n        <div className=\"form-group text-left\">\n          <SearchSchool\n            passedId=\"add-child-shool-list\"\n            handleChangeSchool={handleChangeSchool}\n            schools={schools}\n          />\n        </div>\n        <div className=\"form-check\"></div>\n        <button\n          type=\"button\"\n          className=\"btn btn-primary\"\n          onClick={handleSubmit}\n        >\n          Ajoutez\n        </button>\n      </form>\n    </>\n  );\n}\n\nexport default FormAddChild;\n","import api from \"./api\";\n\nfunction allSnottyBrat() {\n  return api.get(\"api/children/sick\").then((response) => response);\n}\n\n// firstName, lastName, schoolId\n/*\n{\n      firstName: firstName,\n      lastName: lastName,\n      school: { id: schoolId },\n    }\n*/\nfunction addSnottyBrat(obj) {\n  return api.post(\"api/children\", obj).then((response) => response);\n}\n\nfunction getMyBrats(parentId) {\n  return api\n    .get(`api/children/parent/${parentId}`)\n    .then((response) => response);\n}\n\nfunction updateStatus(obj) {\n  return api.put(`api/children/`, obj).then((response) => response);\n}\n\nexport { allSnottyBrat, addSnottyBrat, getMyBrats, updateStatus };\n","import { useEffect, useState } from \"react\";\n\nimport { updateStatus } from \"../service/snottyBrat\";\n\nfunction ChildrenList({ setHasDeclared, hasDeclared, myBrats }) {\n  const [state, setState] = useState([]);\n\n  useEffect(() => {\n    const lesBool = myBrats.map((e) => {\n      return [e.contagious, e.sick];\n    });\n    setState(lesBool);\n    console.log(lesBool);\n  }, []);\n\n  console.log(myBrats);\n\n  const handleChange = (e) => {\n    const { id, checked, name } = e.target;\n    const index = e.target.getAttribute(\"data-key\");\n    const arr = state;\n\n    if (id == \"contagious\") {\n      state[index] = [checked, state[index][1]];\n    } else {\n      state[index] = [state[index][0], checked];\n    }\n    console.log(state[index]);\n\n    console.log(e.target.getAttribute(\"data-key\"));\n    console.log(\"handlechange\", id, checked, name);\n  };\n\n  const handleClickSnottyStatus = (e) => {\n    e.preventDefault();\n\n    const index = e.target.getAttribute(\"data-key\");\n    const bools = state[index];\n\n    // const update = {\n    //   id: e.target.id,\n    //   contagious: bools[0],\n    //   sick: bools[1],\n    // };\n\n    // updateStatus(update).then((response) =>\n    //   console.log(\"my sick brat: \", response)\n    // );\n\n    setHasDeclared(!hasDeclared);\n  };\n\n  return (\n    <>\n      {myBrats && myBrats.length > 0 ? (\n        <>\n          {myBrats.map((e, i) => (\n            <form\n              key={i}\n              data-key={i}\n              className=\"form-check border-bottom border-1\"\n            >\n              <div className=\"mb-3 row\">\n                <label\n                  htmlFor={e.firstName}\n                  className=\"col-sm-8 col-form-label\"\n                >\n                  Le prénom du morveux :\n                </label>\n                <div className=\"col-sm-4\">\n                  <input\n                    type=\"text\"\n                    readOnly\n                    className=\"form-control-plaintext\"\n                    id={e.firstName}\n                    value={e.firstName}\n                  />\n                </div>\n              </div>\n\n              <div className=\"mb-3\">\n                <label className=\"form-check-label\" htmlFor=\"sick\">\n                  malade\n                </label>\n                <input\n                  className=\"form-check-input\"\n                  type=\"checkbox\"\n                  name={e.i}\n                  id=\"sick\"\n                  indeterminate={e.sick.toString()}\n                  onChange={handleChange}\n                  defaultChecked={e.sick}\n                  data-key={i}\n                />\n              </div>\n              <div className=\"mb-3\">\n                <label className=\"form-check-label\" htmlFor=\"contagious\">\n                  contagieux\n                </label>\n                <input\n                  className=\"form-check-input\"\n                  type=\"checkbox\"\n                  name={e.i}\n                  id=\"contagious\"\n                  indeterminate={e.contagious.toString()}\n                  onChange={handleChange}\n                  defaultChecked={e.contagious}\n                  data-key={i}\n                />\n              </div>\n              <button\n                id={e.id}\n                className=\"btn btn-primary mb-2\"\n                onClick={handleClickSnottyStatus}\n              >\n                Mettre à jour l'état de ce morveux\n              </button>\n            </form>\n          ))}\n        </>\n      ) : (\n        <p>Vous n'avez pas de morveux inscrit</p>\n      )}\n    </>\n  );\n}\n\nexport default ChildrenList;\n","import FormAddChild from \"./FormAddChild\";\nimport ChildrenList from \"./ChildrenList\";\n\n// import { getMyInfo } from \"../service/parent\";\n// import { getMyBrats } from \"../service/snottyBrat\";\n// import { useState } from \"react\";\n\nfunction PageDeclare({\n  setHasDeclared,\n  hasDeclared,\n  schools,\n  myBrats,\n  updateBrats,\n}) {\n  // const [myBrats, setMyBrats] = useState();\n\n  const handleClickSnottyBrats = () => {\n    // getMyInfo().then((response) =>\n    //   getMyBrats(response.data.id).then((response) => setMyBrats(response.data))\n    // );\n  };\n\n  return (\n    <div className=\"\">\n      <button\n        type=\"button\"\n        className=\"btn btn-primary\"\n        onClick={() => setHasDeclared(!hasDeclared)}\n      >\n        Retour\n      </button>\n      <div className=\"accordion\" id=\"accordionExample\">\n        <div className=\"accordion-item\">\n          <h2 className=\"accordion-header\" id=\"headingOne\">\n            <button\n              className=\"accordion-button\"\n              type=\"button\"\n              data-bs-toggle=\"collapse\"\n              data-bs-target=\"#collapseOne\"\n              aria-expanded=\"false\"\n              aria-controls=\"collapseOne\"\n            >\n              Ajouter un morveux\n            </button>\n          </h2>\n          <div\n            id=\"collapseOne\"\n            className=\"accordion-collapse collapse show\"\n            aria-labelledby=\"headingOne\"\n            data-bs-parent=\"#accordionExample\"\n          >\n            <div className=\"accordion-body\">\n              <FormAddChild updateBrats={updateBrats} schools={schools} />\n            </div>\n          </div>\n        </div>\n        <div className=\"accordion-item\">\n          <h2 className=\"accordion-header\" id=\"headingTwo\">\n            <button\n              className=\"accordion-button collapsed\"\n              type=\"button\"\n              data-bs-toggle=\"collapse\"\n              data-bs-target=\"#collapseTwo\"\n              aria-expanded=\"true\"\n              aria-controls=\"collapseTwo\"\n              onClick={handleClickSnottyBrats}\n            >\n              Liste de morveux\n            </button>\n          </h2>\n          <div\n            id=\"collapseTwo\"\n            className=\"accordion-collapse collapse\"\n            aria-labelledby=\"headingTwo\"\n            data-bs-parent=\"#accordionExample\"\n          >\n            <div className=\"accordion-body\">\n              <ChildrenList\n                setHasDeclared={setHasDeclared}\n                hasDeclared={hasDeclared}\n                myBrats={myBrats}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default PageDeclare;\n","import MenuHome from \"./components/MenuHome\";\nimport AuthenticatePage from \"./components/AuthenticatePage\";\nimport SearchSchool from \"./components/SearchSchool\";\nimport PageDeclare from \"./components/PageDeclare\";\n\nimport { useEffect, useState } from \"react\";\n\nimport { isAuthenticated } from \"./service/authentication\";\nimport { getSchoolList, getSchoolsInfo } from \"./service/school\";\n// import { allSnottyBrat } from \"./service/snottyBrat\";\nimport axios from \"axios\";\n\nimport { getMyInfo } from \"./service/parent\";\nimport { getMyBrats } from \"./service/snottyBrat\";\n\nfunction App() {\n  const [hasDeclared, setHasDeclared] = useState(false);\n  const [contaminated, setContaminated] = useState(0);\n  const [schools, setSchools] = useState([]);\n  const [school, setSchool] = useState();\n  const [isAuth, setIsAuth] = useState(false);\n  const [schoolInfo, setSchoolInfo] = useState();\n  const [myBrats, setMyBrats] = useState();\n  const [isLoaded, setIsLoaded] = useState(false);\n\n  const handleChangeSchool = (e) => {\n    setSchool(e.target.value);\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    const schoolObj = schools.find((e) => e.name.includes(school));\n    schoolObj &&\n      getSchoolsInfo(schoolObj.id).then((response) =>\n        setSchoolInfo(response.data)\n      );\n  };\n\n  const updateBrats = () => {\n    getMyInfo().then((response) =>\n      getMyBrats(response.data.id).then((response) => {\n        setMyBrats(response.data);\n      })\n    );\n  };\n\n  useEffect(() => {\n    updateBrats();\n    isAuthenticated().then((response) => setIsAuth(response.data));\n\n    getSchoolList().then((response) => setSchools(response.data));\n    // allSnottyBrat().then((response) => setContaminated(response.data.sick));\n    const fetchData = async () => {\n      const allSnots = await axios\n        .get(\"https://declare-ton-morveux.herokuapp.com/api/children/sick\")\n        .then((response) => {\n          console.log(response.data);\n          return response.data;\n        });\n      setContaminated(allSnots);\n    };\n    fetchData();\n  }, []);\n\n  if (hasDeclared && !isAuth) {\n    return (\n      <AuthenticatePage\n        setHasDeclared={setHasDeclared}\n        hasDeclared={hasDeclared}\n        setIsAuth={setIsAuth}\n      />\n    );\n  }\n  if (hasDeclared && isAuth) {\n    return (\n      <PageDeclare\n        updateBrats={updateBrats}\n        setHasDeclared={setHasDeclared}\n        hasDeclared={hasDeclared}\n        schools={schools}\n        myBrats={myBrats}\n        isLoaded={isLoaded}\n      />\n    );\n  }\n\n  return (\n    <div className=\"container-fluid\">\n      <MenuHome\n        setHasDeclared={setHasDeclared}\n        setIsAuth={setIsAuth}\n        isAuth={isAuth}\n      />\n      <h1 className=\"text-center mb-3\">\n        Bienvenue sur <br /> Déclare ton Morveux\n      </h1>\n      <h2 className=\"text-center mb-3\">\n        Le total de morveux est de : {contaminated.sick}\n      </h2>\n      <h3 className=\"text-center mb-3\">\n        Le total de morveux <b>contagieux</b> est de : {contaminated.contagious}\n      </h3>\n      <form>\n        <div className=\"form-group text-left\">\n          <SearchSchool\n            passedId=\"school-choice\"\n            handleChangeSchool={handleChangeSchool}\n            schools={schools}\n          />\n        </div>\n        {/* <div className=\"form-check\"></div> */}\n        <button\n          type=\"button\"\n          className=\"btn btn-primary\"\n          onClick={handleSubmit}\n        >\n          Recherchez\n        </button>\n      </form>\n      {schoolInfo &&\n        (schoolInfo.children.length > 0 ? (\n          <div className=\"mt-3 pt-3 border-top border-2\">\n            <p>\n              Liste de morveux inscrit à l'{schoolInfo.name}\n              <br />\n              <small>\n                Vous pouvez les pointer du doigt et criez \"\n                <b>Ah ! Les p'tits morveux !</b>\"\n              </small>\n            </p>\n\n            <ul>\n              {schoolInfo.children.map((e, i) => (\n                <li key={i}>\n                  {e.firstName} {e.lastName}\n                </li>\n              ))}\n            </ul>\n          </div>\n        ) : (\n          <div className=\"mt-3 pt-3 border-top border-2\">\n            <p>Il n'y a pas de morveux à {schoolInfo.name}.</p>\n          </div>\n        ))}\n    </div>\n  );\n}\n\nexport default App;\n","import api from \"./api\";\n\nfunction getMyInfo() {\n  return api.get(\"api/parents/me\").then((response) => response);\n}\n\nexport { getMyInfo };\n","import api from \"./api\";\n\nfunction getSchoolList() {\n  return api.get(\"/api/schools\").then((response) => response);\n}\n\nfunction getSchoolsInfo(id) {\n  return api.get(`api/schools/${id}`).then((response) => response);\n}\n\nexport { getSchoolList, getSchoolsInfo };\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}