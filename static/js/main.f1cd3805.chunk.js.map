{"version":3,"sources":["service/token.jsx","service/api.jsx","service/authentication.jsx","components/MenuHome.js","components/FormAuthenticate.js","components/AuthenticatePage.js","components/SearchSchool.js","components/FormAddChild.js","service/snottyBrat.jsx","components/ChildrenList.js","components/PageDeclare.js","service/parent.jsx","App.js","service/school.jsx","reportWebVitals.js","index.js"],"names":["setToken","token","console","log","substr","localStorage","setItem","defaultOptions","baseURL","method","headers","api","axios","create","interceptors","request","use","config","getItem","Authorization","response","res","err","status","removeItem","Error","isAuthenticated","get","then","MenuHome","hasDeclared","setHasDeclared","setIsAuth","isAuth","className","type","onClick","post","data","FormAuthenticate","spec","handleChange","handleSubmit","header","htmlFor","id","userId","aria-describedby","placeholder","value","state","username","onChange","passId","autoComplete","password","btnValue","AuthenticatePage","useState","signinUsername","signinPassword","signinState","setSigninState","loginUsername","loginPassword","loginState","setLoginState","signSpec","Object","keys","logSpec","e","target","prevState","preventDefault","catch","error","alert","SearchSchool","handleChangeSchool","passedId","schools","list","name","map","i","FormAddChild","firstName","lastName","child","setChild","school","setSchool","handleChangeInput","bratObj","find","includes","obj","addSnottyBrat","ChildrenList","myBrats","length","readonly","PageDeclare","setMyBrats","data-bs-toggle","data-bs-target","aria-expanded","aria-controls","aria-labelledby","data-bs-parent","parentId","App","contaminated","setContaminated","setSchools","schoolInfo","setSchoolInfo","useEffect","sick","schoolObj","children","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f1cd3805.chunk.js","sourcesContent":["function setToken(token) {\n  if (token) {\n    console.log(`service/token setToken ${token.substr(0, 10)}...`);\n    localStorage.setItem(\"token\", token);\n  }\n}\n\nfunction getToken() {\n  return localStorage.getItem(\"token\");\n}\n\nfunction removeToken() {\n  localStorage.removeItem(\"token\");\n}\n\nexport { setToken, getToken, removeToken };\n","import axios from \"axios\";\n\nimport { getToken, removeToken } from \"./token\";\n\n// TODO : Check Bearer token with nasri\n\nconst REACT_APP_API_BASE_URL = \"https://declare-ton-morveux.herokuapp.com/\";\n\nconst defaultOptions = {\n  baseURL: REACT_APP_API_BASE_URL,\n  method: \"get\",\n  headers: {\n    \"Content-Type\": \"application/json\",\n  },\n};\nconst api = axios.create(defaultOptions);\n\napi.interceptors.request.use((config) => {\n  const token = getToken();\n  // console.log(`interceptors request with token ${token}`);\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\n\napi.interceptors.response.use(\n  (res) => {\n    // console.log(\"interceptors response : \", res);\n    return res;\n  },\n  (err) => {\n    if (err.response.status === 401) {\n      removeToken();\n      throw new Error(`Invalid token`);\n    }\n    throw err;\n  }\n);\n\nexport default api;\n","import api from \"./api\";\nimport { setToken } from \"./token\";\n\nfunction login(username, password) {\n  return api\n    .post(`authenticate`, {\n      username: username,\n      password: password,\n    })\n    .then((response) => {\n      const token = response.data.token;\n      setToken(token);\n      return token;\n    });\n}\n\nfunction register(username, password) {\n  return api\n    .post(`register`, {\n      username: username,\n      password: password,\n    })\n    .then((response) => {\n      const token = response.data.token;\n      setToken(token);\n      return token;\n    });\n}\n\nfunction isAuthenticated() {\n  return api.get(`isAuthenticated`).then((response) => response);\n}\nfunction loggingOut() {\n  return api.post(`logout`);\n}\n\nexport { login, register, isAuthenticated, loggingOut };\n","import { loggingOut } from \"../service/authentication\";\n\nfunction MenuHome({ hasDeclared, setHasDeclared, setIsAuth, isAuth }) {\n  const handleLogout = () => {\n    loggingOut().then((response) => setIsAuth(response.data));\n  };\n\n  return (\n    <>\n      <nav className=\"navbar navbar-expand-lg navbar-light bg-light\">\n        <div className=\"container-fluid\">\n          <span className=\"navbar-brand\">DtM Logo</span>\n          <button\n            className=\"btn btn-outline-success\"\n            type=\"submit\"\n            onClick={() => setHasDeclared(!hasDeclared)}\n          >\n            Déclarez un enfant\n          </button>\n          {isAuth && (\n            <button\n              className=\"btn btn-outline-warning\"\n              type=\"submit\"\n              onClick={handleLogout}\n            >\n              Se déconnecter\n            </button>\n          )}\n        </div>\n      </nav>\n    </>\n  );\n}\n\nexport default MenuHome;\n","function FormAuthenticate({ spec, handleChange, handleSubmit }) {\n  return (\n    <div className=\"col-sm\">\n      <h3>{spec.header}</h3>\n      <form>\n        <div className=\"form-group text-left\">\n          <label htmlFor=\"exampleInputEmail1\">Nom d'utilisateur</label>\n          <input\n            type=\"username\"\n            className=\"form-control\"\n            id={spec.userId}\n            aria-describedby=\"usernameHelp\"\n            placeholder=\"Entrez votre nom d'utilisateur\"\n            value={spec.state.username}\n            onChange={handleChange}\n          />\n          <small id=\"usernameHelp\" className=\"form-text text-muted\">\n            Nom d'utilisateur (pas l'email)\n          </small>\n        </div>\n        <div className=\"form-group text-left\">\n          <label htmlFor=\"exampleInputPassword1\">Mot de passe</label>\n          <input\n            type=\"password\"\n            className=\"form-control\"\n            id={spec.passId}\n            placeholder=\"Entrez votre mot de passe\"\n            autoComplete=\"new-password\"\n            value={spec.state.password}\n            onChange={handleChange}\n          />\n        </div>\n        <div className=\"form-check\"></div>\n        <button\n          type=\"submit\"\n          className=\"btn btn-primary btn-block\"\n          onClick={handleSubmit}\n        >\n          {spec.btnValue}\n        </button>\n      </form>\n    </div>\n  );\n}\n\nexport default FormAuthenticate;\n","import { useState } from \"react\";\nimport { register, login, isAuthenticated } from \"../service/authentication\";\n\nimport FormAuthenticate from \"./FormAuthenticate\";\n\nfunction AuthenticatePage({ setHasDeclared, hasDeclared, setIsAuth }) {\n  const [signinState, setSigninState] = useState({\n    signinUsername: \"\",\n    signinPassword: \"\",\n  });\n\n  const [loginState, setLoginState] = useState({\n    loginUsername: \"\",\n    loginPassword: \"\",\n  });\n\n  const handleChangeSignin = (e) => {\n    const { id, value } = e.target;\n    setSigninState((prevState) => ({\n      ...prevState,\n      [id]: value,\n    }));\n  };\n\n  const handleChangeLogin = (e) => {\n    const { id, value } = e.target;\n    setLoginState((prevState) => ({\n      ...prevState,\n      [id]: value,\n    }));\n  };\n\n  const handleSubmitSignin = (e) => {\n    e.preventDefault();\n    const { signinUsername, signinPassword } = signinState;\n    register(signinUsername, signinPassword)\n      .then(\n        (response) => {\n          // console.log(`You are connected with token : ${response.token}`);\n          console.log(response);\n        },\n        () => console.log(\"already taken\")\n      )\n      .catch((error) => alert(`Sorry, there was an error`));\n    isAuthenticated()\n      .then((response) => response)\n      .then((data) => setIsAuth(data));\n  };\n\n  const handleSubmitLogin = (e) => {\n    e.preventDefault();\n    const { loginUsername, loginPassword } = loginState;\n    login(loginUsername, loginPassword)\n      .then((token) => {\n        // console.log(`You are connected with token : ${token}`);\n      })\n      .catch((error) => {\n        alert(`Sorry, there was an error`);\n        console.log(error);\n      });\n    isAuthenticated()\n      .then((response) => response)\n      .then((data) => setIsAuth(data));\n  };\n\n  const signSpec = {\n    header: \"Créer un compte\",\n    userId: Object.keys(signinState)[0],\n    state: signinState,\n    passId: Object.keys(signinState)[1],\n    btnValue: \"Créer un compte\",\n  };\n\n  const logSpec = {\n    header: \"Se connecter\",\n    userId: Object.keys(loginState)[0],\n    state: loginState,\n    passId: Object.keys(loginState)[1],\n    btnValue: \"Se connecter\",\n  };\n\n  return (\n    <div className=\"container-fluid\">\n      <button\n        type=\"button\"\n        className=\"btn btn-primary\"\n        onClick={() => setHasDeclared(!hasDeclared)}\n      >\n        Retour\n      </button>\n      <div className=\"row\">\n        <div className=\"col-sm-6\">\n          <FormAuthenticate\n            spec={signSpec}\n            handleChange={handleChangeSignin}\n            handleSubmit={handleSubmitSignin}\n          />\n        </div>\n        <div className=\"col-sm-6\">\n          <FormAuthenticate\n            spec={logSpec}\n            handleChange={handleChangeLogin}\n            handleSubmit={handleSubmitLogin}\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default AuthenticatePage;\n","function SearchSchool({ handleChangeSchool, passedId, schools }) {\n  // const schoolLists = [\n  //   {\n  //     school: \"some school\",\n  //     id: 0,\n  //   },\n  //   {\n  //     school: \"the other one\",\n  //     id: 1,\n  //   },\n  //   {\n  //     school: \"the other other school\",\n  //     id: 2,\n  //   },\n  // ];\n\n  return (\n    <>\n      <label htmlFor={passedId}>Choisissez une école :</label>\n      <input\n        list=\"school-lists\"\n        id={passedId}\n        name=\"school-choice\"\n        onChange={handleChangeSchool}\n        placeholder=\"Cliquez ou entrez une école\"\n      />\n\n      <datalist id=\"school-lists\">\n        {schools.map((e, i) => (\n          <option key={e.id} value={e.name} />\n        ))}\n      </datalist>\n    </>\n  );\n}\n\nexport default SearchSchool;\n","import SearchSchool from \"./SearchSchool\";\nimport { useState } from \"react\";\n\nimport { addSnottyBrat } from \"../service/snottyBrat\";\n\nfunction FormAddChild({ schools }) {\n  const [child, setChild] = useState({ firstName: \"\", lastName: \"\" });\n  const [school, setSchool] = useState();\n\n  const handleChangeSchool = (e) => {\n    setSchool(e.target.value);\n  };\n\n  const handleChangeInput = (e) => {\n    const { id, value } = e.target;\n    setChild((prevState) => ({\n      ...prevState,\n      [id]: value,\n    }));\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    const { firstName, lastName } = child;\n    const schoolObj = schools.find((e) => e.name.includes(school));\n    const bratObj = { firstName, lastName, school: { id: schoolObj.id } };\n    console.log(bratObj);\n    addSnottyBrat(bratObj).then((response) => console.log(response.data));\n  };\n\n  return (\n    <>\n      <form>\n        <div className=\"form-group text-left\">\n          <label>Prénom du morveux :</label>\n          <input id=\"firstName\" onChange={handleChangeInput} />\n        </div>\n        <div className=\"form-group text-left\">\n          <label>Nom de famille du morveux :</label>\n          <input id=\"lastName\" onChange={handleChangeInput} />\n        </div>\n        <div className=\"form-group text-left\">\n          <SearchSchool\n            passedId=\"add-child-shool-list\"\n            handleChangeSchool={handleChangeSchool}\n            schools={schools}\n          />\n        </div>\n        <div className=\"form-check\"></div>\n        <button\n          type=\"button\"\n          className=\"btn btn-primary\"\n          onClick={handleSubmit}\n        >\n          Ajoutez\n        </button>\n      </form>\n    </>\n  );\n}\n\nexport default FormAddChild;\n","import api from \"./api\";\n\nfunction allSnottyBrat() {\n  return api.get(\"api/children/sick\").then((response) => response);\n}\n\n// firstName, lastName, schoolId\n/*\n{\n      firstName: firstName,\n      lastName: lastName,\n      school: { id: schoolId },\n    }\n*/\nfunction addSnottyBrat({ obj }) {\n  return api.post(\"api/children\", obj).then((response) => response);\n}\n\nfunction getMyBrats(parentId) {\n  return api\n    .get(`api/children/parent/${parentId}`)\n    .then((response) => response);\n}\n\nexport { allSnottyBrat, addSnottyBrat, getMyBrats };\n","function ChildrenList({ setHasDeclared, hasDeclared, myBrats }) {\n  // const lists = [\"toto\", \"bobby\"];\n  return (\n    <>\n      {myBrats && myBrats.length > 0 ? (\n        <>\n          {myBrats.map((e, i) => (\n            <div key={i} className=\"form-check\">\n              <div className=\"mb-3 row\">\n                <label\n                  htmlFor={e.firstName}\n                  className=\"col-sm-2 col-form-label\"\n                >\n                  Le prénom du morveux\n                </label>\n                <div className=\"col-sm-10\">\n                  <input\n                    type=\"text\"\n                    readonly\n                    className=\"form-control-plaintext\"\n                    id={e.firstName}\n                    value={e.firstName}\n                  />\n                </div>\n              </div>\n              <div className=\"mb-3 row\">\n                <label className=\"form-check-label\" htmlFor=\"malade\">\n                  malade\n                </label>\n                <input\n                  className=\"form-check-input\"\n                  type=\"radio\"\n                  name=\"child\"\n                  id=\"malade\"\n                />\n              </div>\n              <div className=\"mb-3 row\">\n                <label className=\"form-check-label\" htmlFor=\"contagieux\">\n                  contagieux\n                </label>\n                <input\n                  className=\"form-check-input\"\n                  type=\"radio\"\n                  name=\"child\"\n                  id=\"contagieux\"\n                />\n              </div>\n            </div>\n          ))}\n          <button\n            className=\"btn btn-primary\"\n            onClick={() => setHasDeclared(!hasDeclared)}\n          >\n            Mettre à jour l'état{\" \"}\n            {myBrats.length > 1 ? \"des enfants\" : \"de l'enfant\"}\n          </button>\n        </>\n      ) : (\n        <p>Vous n'avez pas de morveux inscrit</p>\n      )}\n    </>\n  );\n}\n\nexport default ChildrenList;\n","import FormAddChild from \"./FormAddChild\";\nimport ChildrenList from \"./ChildrenList\";\n\nimport { getMyInfo } from \"../service/parent\";\nimport { getMyBrats } from \"../service/snottyBrat\";\nimport { useState } from \"react\";\n\nfunction PageDeclare({ setHasDeclared, hasDeclared, schools }) {\n  // const [myId, setMyId] = useState();\n  const [myBrats, setMyBrats] = useState();\n\n  const handleClickSnottyBrats = () => {\n    // getMyInfo().then((response) => setMyId(response.data.id));\n    // getMyBrats(myId).then((response) => setMyBrats(response.data));\n\n    getMyInfo().then((response) =>\n      getMyBrats(response.data.id).then((response) => setMyBrats(response.data))\n    );\n  };\n\n  return (\n    <div className=\"\">\n      <button\n        type=\"button\"\n        className=\"btn btn-primary\"\n        onClick={() => setHasDeclared(!hasDeclared)}\n      >\n        Retour\n      </button>\n      <div className=\"accordion\" id=\"accordionExample\">\n        <div className=\"accordion-item\">\n          <h2 className=\"accordion-header\" id=\"headingOne\">\n            <button\n              className=\"accordion-button\"\n              type=\"button\"\n              data-bs-toggle=\"collapse\"\n              data-bs-target=\"#collapseOne\"\n              aria-expanded=\"false\"\n              aria-controls=\"collapseOne\"\n            >\n              Ajouter un morveux\n            </button>\n          </h2>\n          <div\n            id=\"collapseOne\"\n            className=\"accordion-collapse collapse show\"\n            aria-labelledby=\"headingOne\"\n            data-bs-parent=\"#accordionExample\"\n          >\n            <div className=\"accordion-body\">\n              <FormAddChild schools={schools} />\n            </div>\n          </div>\n        </div>\n        <div className=\"accordion-item\">\n          <h2 className=\"accordion-header\" id=\"headingTwo\">\n            <button\n              className=\"accordion-button collapsed\"\n              type=\"button\"\n              data-bs-toggle=\"collapse\"\n              data-bs-target=\"#collapseTwo\"\n              aria-expanded=\"true\"\n              aria-controls=\"collapseTwo\"\n              onClick={handleClickSnottyBrats}\n            >\n              Liste de morveux\n            </button>\n          </h2>\n          <div\n            id=\"collapseTwo\"\n            className=\"accordion-collapse collapse\"\n            aria-labelledby=\"headingTwo\"\n            data-bs-parent=\"#accordionExample\"\n          >\n            <div className=\"accordion-body\">\n              <ChildrenList\n                setHasDeclared={setHasDeclared}\n                hasDeclared={hasDeclared}\n                myBrats={myBrats}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default PageDeclare;\n","import api from \"./api\";\n\nfunction getMyInfo() {\n  return api.get(\"api/parents/me\").then((response) => response);\n}\n\nexport { getMyInfo };\n","import MenuHome from \"./components/MenuHome\";\nimport AuthenticatePage from \"./components/AuthenticatePage\";\nimport SearchSchool from \"./components/SearchSchool\";\nimport PageDeclare from \"./components/PageDeclare\";\n\nimport { useEffect, useState } from \"react\";\n\nimport { isAuthenticated } from \"./service/authentication\";\nimport { getSchoolList, getSchoolsInfo } from \"./service/school\";\nimport { allSnottyBrat } from \"./service/snottyBrat\";\n\nfunction App() {\n  const [hasDeclared, setHasDeclared] = useState(false);\n  const [contaminated, setContaminated] = useState(0);\n  const [schools, setSchools] = useState([]);\n  const [school, setSchool] = useState();\n  const [isAuth, setIsAuth] = useState();\n  const [schoolInfo, setSchoolInfo] = useState();\n\n  const handleChangeSchool = (e) => {\n    setSchool(e.target.value);\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    const schoolObj = schools.find((e) => e.name.includes(school));\n    schoolObj &&\n      getSchoolsInfo(schoolObj.id).then((response) =>\n        setSchoolInfo(response.data)\n      );\n  };\n\n  useEffect(() => {\n    isAuthenticated().then((response) => setIsAuth(response.data));\n\n    getSchoolList().then((response) => setSchools(response.data));\n    allSnottyBrat().then((response) => setContaminated(response.data.sick));\n  }, []);\n\n  if (hasDeclared && !isAuth) {\n    return (\n      <AuthenticatePage\n        setHasDeclared={setHasDeclared}\n        hasDeclared={hasDeclared}\n        setIsAuth={setIsAuth}\n      />\n    );\n  }\n  if (hasDeclared && isAuth) {\n    return (\n      <PageDeclare\n        setHasDeclared={setHasDeclared}\n        hasDeclared={hasDeclared}\n        schools={schools}\n      />\n    );\n  }\n\n  return (\n    <div className=\"contaier-fluid\">\n      <MenuHome\n        setHasDeclared={setHasDeclared}\n        setIsAuth={setIsAuth}\n        isAuth={isAuth}\n      />\n      <h1 className=\"text-center mb-3\">\n        Bienvenue sur <br /> Déclare ton Morveux\n      </h1>\n      <h2 className=\"text-center mb-3\">\n        Le total de morveux est de : {contaminated}\n      </h2>\n      <form>\n        <div className=\"form-group text-left\">\n          <SearchSchool\n            passedId=\"school-choice\"\n            handleChangeSchool={handleChangeSchool}\n            schools={schools}\n          />\n        </div>\n        {/* <div className=\"form-check\"></div> */}\n        <button\n          type=\"button\"\n          className=\"btn btn-primary\"\n          onClick={handleSubmit}\n        >\n          Recherchez\n        </button>\n      </form>\n      {schoolInfo &&\n        (schoolInfo.children.length > 0 ? (\n          <div className=\"mt-3 pt-3 border-top border-2\">\n            <p>\n              Liste de morveux inscrit à l'{schoolInfo.name}\n              <br />\n              <small>\n                Vous pouvez les pointer du doigt et criez \"\n                <b>Ah ! Les p'tits morveux !</b>\"\n              </small>\n            </p>\n\n            <ul>\n              {schoolInfo.children.map((e, i) => (\n                <li key={i}>\n                  {e.firstName} {e.lastName}\n                </li>\n              ))}\n            </ul>\n          </div>\n        ) : (\n          <div className=\"mt-3 pt-3 border-top border-2\">\n            <p>Il n'y a pas de morveux à {schoolInfo.name}.</p>\n          </div>\n        ))}\n    </div>\n  );\n}\n\nexport default App;\n","import api from \"./api\";\n\nfunction getSchoolList() {\n  return api.get(\"/api/schools\").then((response) => response);\n}\n\nfunction getSchoolsInfo(id) {\n  return api.get(`api/schools/${id}`).then((response) => response);\n}\n\nexport { getSchoolList, getSchoolsInfo };\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}